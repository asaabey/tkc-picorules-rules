# Picorules walktrough 1



## Applying Framingham based Cardiovascular risk estimation 


Picorules can contain comment statements and uses C like syntax
```
/* Ruleblock to apply Framingham equations*/
```

Ruleblocks have to start with a definition wrapped up in a ```#define_ruleblock()``` function.

```
#define_ruleblock(cvra,
            {
                description: "Ruleblock to apply Framingham equations",
                version: "0.1.1.1",
                blockid: "cvra",
                target_table:"rout_cvra",
                environment:"PROD",
                rule_owner:"TKCADMIN",
                rule_author:"author@email.com",
                is_active:2,
                def_exit_prop:"cvra",
                def_predicate:">0",
                exec_order:5
                
            }
        );
```

A very useful feature in Picorules is the ability to write self-documenting code. The ```#doc()``` function.  

```
#doc(,
            {
                txt:"CV risk assessment equation",
                cite:"cvra_hlc_2019,cvra_circ_2018"
            }
            
        );
```

The following statements illustrate the use of the ```val.bind()``` function. ```rout_ckd``` references the normalized table generated by the ```ckd``` rule block. ```ckd``` is the property or column and ```val.bind()``` references to the value. Picorules allows modularization of ruleblocks and reuse of already computed hyperattributes.
The example below references 3 preceding rule blocks ```ckd```, ```dm``` and ```careplan```. 

```
ckd => rout_ckd.ckd.val.bind();

dm => rout_cd_dm.dm.val.bind();

cp_hicvr => rout_careplan.cp_hicvr.val.bind();
```



```
asm_cvra => eadv.asm_cvra.val.lastdv();
        
dob => eadv.dmg_dob.dt.max();

male => eadv.dmg_gender.val.max();
```






